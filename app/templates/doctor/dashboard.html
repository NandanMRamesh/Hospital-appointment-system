{% extends 'base.html' %}
{% block title %}Doctor Dashboard{% endblock %}
{% block content %}
<h2>Your Upcoming Appointments</h2>
<table class="table">
  <thead>
    <tr><th>Date</th><th>Time</th><th>Patient</th><th>Status</th></tr>
  </thead>
  <tbody>
    {% for appt in appointments %}
    <tr>
      <td>{{ appt.date }}</td>
      <td>{{ appt.time }}</td>
      <td>{{ appt.patient.user.get_full_name }} ({{ appt.patient.user.username }})</td>
      <td>
        {{ appt.get_status_display }}
        {% if appt.status == 'scheduled' %}
        <form method="post" action="{% url 'complete_appointment' appt.pk %}" style="display:inline;">
          {% csrf_token %}
          <button class="btn btn-sm btn-success ms-2" type="submit">Complete</button>
        </form>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="4">No upcoming appointments.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}